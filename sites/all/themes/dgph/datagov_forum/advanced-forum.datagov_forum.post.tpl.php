<?php/** * @file * * Theme implementation: Template for each forum post whether node or comment. * * All variables available in node.tpl.php and comment.tpl.php for your theme * are available here. In addition, Advanced Forum makes available the following * variables: * * - $top_post: TRUE if we are formatting the main post (ie, not a comment) * - $reply_link: Text link / button to reply to topic. * - $total_posts: Number of posts in topic (not counting first post). * - $new_posts: Number of new posts in topic, and link to first new. * - $links_array: Unformatted array of links. * - $account: User object of the post author. * - $name: User name of post author. * - $author_pane: Entire contents of the Author Pane template. */$forum_id = '';if(sizeof($node->taxonomy_forums)){	$forum_id = $node->taxonomy_forums['und'][0]['tid'];}$uid    = $node->uid;$posted = date('m/d/Y - h:i', $node->created);if(is_object($comment)){	$uid    = $comment->uid;	$posted = date('m/d/Y - h:i', $comment->created);}$user_fields = user_load($uid);if(sizeof($user_fields->field_first_name)):	$fname = $user_fields->field_first_name['und'][0]['value'];endif;$lname = '';if(sizeof($user_fields->field_last_name)):	$lname = $user_fields->field_last_name['und'][0]['value'];endif;$author_name = '';if($fname || $lname):	$author_name = $fname.' '.$lname;else: 	$author_name = $user_fields->name;endif;$picture = '';if (!empty($user_fields->picture) && file_exists($user_fields->picture->uri)):      $picture = $user_fields->picture->uri;elseif(variable_get('user_picture_default', '')):      $picture = ltrim(variable_get('user_picture_default', ''), '/'); //PATCH: using the ltrim to get rid of any leading '/'endif;$forum_author_picture  = '<img class="adaptive-image" src="'.image_style_url('forum_author_avtar', $picture).'" alt="" title="" />';$comment_author_picture = '<img class="adaptive-image" src="'.image_style_url('comment_avtar', $picture).'" alt="" title="" />';//$user_fields->created//$user_fields->access//$user_fields->login?><?php if(!is_object($comment)): ?><div class="row forumdetailpage-header">	<div class="large-12 columns returnlink">		<?php print l('RETURN TO FORUM', 'forum/'.$forum_id); ?>	</div></div><?php endif; ?><div class="row forumdetailpage">	<div class="large-3 columns">		<div class="forumauthorpanel forum">			<?php print $author_name ?>		</div>		<div class="forum-author-picture forum">			<?php print $forum_author_picture ?>		</div>		<div class="comment-author-picture comment">			<?php print $forum_author_picture ?>		</div>		<div class="forumauthorpanel comment">			<?php print $author_name ?>		</div>		<div class="posted">			<span><?php print ('Posted'); ?></span><br />			<?php print $posted ?>		</div>		<div class="lastlogin forum">			<span><?php print ('Last Login'); ?></span><br />			<?php print date('m/d/Y - h:i', $user_fields->login); ?>		</div>		<div class="joined forum">			<span><?php print ('Joined'); ?></span><br />			<?php print date('m/d/Y - h:i', $user_fields->created); ?>		</div>	</div><!-- left column -->	<div class="large-9 columns">		<div id="<?php print $post_id; ?>" class="<?php print $classes; ?>" <?php print $attributes; ?>>		  <?php if (!empty($title)): ?>			<div class="forum-post-title">			  <?php print $title ?>			</div>		  <?php endif; ?>		  <?php				// We hide the comments and links now so that we can render them later.				hide($content['taxonomy_forums']);				hide($content['comments']);				hide($content['links']);				if (!$top_post)					hide($content['body']);				print render($content);		  ?>		  <div class="forum-post-footer clearfix">			<div class="forum-post-links">			  <?php print render($content['links']); ?>			</div>		  </div><?php // End of footer div ?>		</div><?php // End of main wrapping div ?>		<?php print render($content['comments']); ?>	</div><!-- right column --></div><!-- row -->